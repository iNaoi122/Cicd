# ๐ RaceTracker - Getting Started

ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ะทะฐะฟััะบั ะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฟัะธะปะพะถะตะฝะธั RaceTracker ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะธะฝัะพัะผะฐัะธะตะน ะพ ัะบะฐัะบะฐั.

## ๐ ะกะพะดะตัะถะฐะฝะธะต

1. [ะัััััะน ััะฐัั](#ะฑัััััะน-ััะฐัั)
2. [ะััะธัะตะบัััะฐ](#ะฐััะธัะตะบัััะฐ)
3. [ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ](#ะพัะฝะพะฒะฝัะต-ััะฝะบัะธะธ)
4. [API ะะพะบัะผะตะฝัะฐัะธั](#api-ะดะพะบัะผะตะฝัะฐัะธั)
5. [ะะฐะทัะฐะฑะพัะบะฐ](#ัะฐะทัะฐะฑะพัะบะฐ)
6. [Troubleshooting](#troubleshooting)

## ๐ ะัััััะน ััะฐัั

### ะขัะตะฑะพะฒะฐะฝะธั
- Docker Engine 20.10+
- Docker Compose 2.0+
- ะัะฐัะทะตั ะดะปั ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ

### ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั

```bash
# ะะตัะตะนัะธ ะฒ ะดะธัะตะบัะพัะธั ะฟัะพะตะบัะฐ
cd /home/sergey/University/cicd

# ะะฐะฟัััะธัั Docker Compose
docker-compose up -d

# ะัะพะฒะตัะธัั ััะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps
```

### ะะพัััะฟ ะบ ะฟัะธะปะพะถะตะฝะธั

| ะะพะผะฟะพะฝะตะฝั | URL | ะะฟะธัะฐะฝะธะต |
|-----------|-----|---------|
| **ะะตะฑ-ะธะฝัะตััะตะนั** | http://localhost | Frontend SPA (Vanilla JS) |
| **API Backend** | http://localhost:8000 | FastAPI ัะตัะฒะตั |
| **API Docs** | http://localhost:8000/docs | Swagger UI ะดะพะบัะผะตะฝัะฐัะธั |
| **Health Check** | http://localhost:8000/health | ะกัะฐััั ัะตัะฒะธัะฐ |

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Frontend (Nginx + Vanilla JS)     โ
โ   - FSD Architecture (6 layers)     โ
โ   - Vanilla ES6+ (no frameworks)    โ
โ   - Responsive CSS Grid/Flexbox     โ
โ   Port: 80                          โ
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
                 โ
           HTTP Requests
        (via /api proxy)
                 โ
โโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโ
โ    Backend (FastAPI + SQLAlchemy)   โ
โ    - Python 3.11                    โ
โ    - Async/await with asyncio       โ
โ    - SQLAlchemy ORM                 โ
โ    - SQLite In-Memory Database      โ
โ    Port: 8000                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Frontend Architecture (FSD)

```
src/
โโโ app/                    # App layer - ะธะฝะธัะธะฐะปะธะทะฐัะธั
โ   โโโ app.js             # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ router.js          # SPA ะผะฐัััััะธะทะฐัะพั
โ   โโโ styles/
โ       โโโ index.css      # ะะปะพะฑะฐะปัะฝัะต ััะธะปะธ
โโโ pages/                 # Pages layer - ัััะฐะฝะธัั
โ   โโโ RacesPage/
โ   โโโ RaceDetailsPage/
โ   โโโ JockeysPage/
โ   โโโ JockeyDetailsPage/
โ   โโโ HorsesPage/
โ   โโโ HorseDetailsPage/
โโโ widgets/               # Widgets layer - ัะปะพะถะฝัะต ะบะพะผะฟะพะฝะตะฝัั
โ   โโโ Header/
โ   โโโ RaceCard/
โ   โโโ ParticipantsList/
โโโ features/              # Features layer - ััะฝะบัะธะธ
โ   โโโ CreateRace/
โ   โโโ AddJockey/
โ   โโโ AddHorse/
โ   โโโ AddRaceResult/
โโโ entities/              # Entities layer - ัััะฝะพััะธ
โ   โโโ race/
โ   โโโ jockey/
โ   โโโ horse/
โ   โโโ owner/
โ   โโโ participant/
โโโ shared/                # Shared layer - ััะธะปะธัั
    โโโ api/              # HTTP ะบะปะธะตะฝั ั ะบะตัะธัะพะฒะฐะฝะธะตะผ
    โโโ lib/              # ะฃัะธะปะธัั (eventBus, utils)
    โโโ ui/               # UI ะบะพะผะฟะพะฝะตะฝัั ัะฐะฑัะธะบะฐ
```

### Backend Architecture

```
src/
โโโ main.py                           # ะขะพัะบะฐ ะฒัะพะดะฐ FastAPI
โโโ framework/
โ   โโโ api/v1/
โ   โ   โโโ races.py                 # Routes ะดะปั ัะพัััะทะฐะฝะธะน
โ   โ   โโโ jockeys.py               # Routes ะดะปั ะถะพะบะตะตะฒ
โ   โ   โโโ horses.py                # Routes ะดะปั ะปะพัะฐะดะตะน
โ   โ   โโโ owners.py                # Routes ะดะปั ะฒะปะฐะดะตะปััะตะฒ
โ   โ   โโโ participants.py          # Routes ะดะปั ััะฐััะฝะธะบะพะฒ
โ   โโโ schemas.py                   # Pydantic ััะตะผั
โ   โโโ dependencies.py              # ะะฐะฒะธัะธะผะพััะธ (DI)
โ   โโโ error_handlers.py            # ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
โโโ business/
โ   โโโ operations/
โ       โโโ race_operations.py       # ะะธะทะฝะตั-ะปะพะณะธะบะฐ ัะพัััะทะฐะฝะธะน
โ       โโโ jockey_operations.py     # ะะธะทะฝะตั-ะปะพะณะธะบะฐ ะถะพะบะตะตะฒ
โ       โโโ horse_operations.py      # ะะธะทะฝะตั-ะปะพะณะธะบะฐ ะปะพัะฐะดะตะน
โ       โโโ owner_operations.py      # ะะธะทะฝะตั-ะปะพะณะธะบะฐ ะฒะปะฐะดะตะปััะตะฒ
โ       โโโ participant_operations.py# ะะธะทะฝะตั-ะปะพะณะธะบะฐ ััะฐััะฝะธะบะพะฒ
โโโ data/
    โโโ database.py                  # ะะพะดะบะปััะตะฝะธะต ะบ ะะ
    โโโ models.py                    # SQLAlchemy ะผะพะดะตะปะธ
    โโโ repositories/
    โ   โโโ race_repository.py
    โ   โโโ jockey_repository.py
    โ   โโโ horse_repository.py
    โ   โโโ owner_repository.py
    โ   โโโ participant_repository.py
    โโโ uow.py                       # Unit of Work ะฟะฐััะตัะฝ
```

## ๐ ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

### 1. ะฃะฟัะฐะฒะปะตะฝะธะต ัะพัััะทะฐะฝะธัะผะธ (Races)
- โ ะัะพัะผะพัั ะฒัะตั ัะพัััะทะฐะฝะธะน
- โ ะัะพัะผะพัั ะดะตัะฐะปะตะน ัะพัััะทะฐะฝะธั ั ััะฐััะฝะธะบะฐะผะธ ะธ ัะตะทัะปััะฐัะฐะผะธ
- โ ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ัะพัััะทะฐะฝะธั
- โ ะะพะฑะฐะฒะปะตะฝะธะต ััะฐััะฝะธะบะพะฒ (ะถะพะบะตะน + ะปะพัะฐะดั) ั ัะตะทัะปััะฐัะฐะผะธ

### 2. ะฃะฟัะฐะฒะปะตะฝะธะต ะถะพะบะตัะผะธ (Jockeys)
- โ ะัะพัะผะพัั ะฒัะตั ะถะพะบะตะตะฒ
- โ ะัะพัะผะพัั ะฟัะพัะธะปั ะถะพะบะตั ั ะธััะพัะธะตะน ะตะณะพ ัะพัััะทะฐะฝะธะน
- โ ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ะถะพะบะตั
- โ ะััะปะตะถะธะฒะฐะฝะธะต ัะตะนัะธะฝะณะฐ

### 3. ะฃะฟัะฐะฒะปะตะฝะธะต ะปะพัะฐะดัะผะธ (Horses)
- โ ะัะพัะผะพัั ะฒัะตั ะปะพัะฐะดะตะน
- โ ะัะพัะผะพัั ะฟัะพัะธะปั ะปะพัะฐะดะธ ั ะธััะพัะธะตะน ะตั ัะพัััะทะฐะฝะธะน
- โ ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะน ะปะพัะฐะดะธ
- โ ะัะธะฒัะทะบะฐ ะบ ะฒะปะฐะดะตะปััั

### 4. ะฃะฟัะฐะฒะปะตะฝะธะต ะฒะปะฐะดะตะปััะฐะผะธ (Owners)
- โ ะัะพัะผะพัั ะฒัะตั ะฒะปะฐะดะตะปััะตะฒ
- โ ะัะพัะผะพัั ะธะฝัะพัะผะฐัะธะธ ะพ ะฒะปะฐะดะตะปััะต
- โ ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ะฒะปะฐะดะตะปััะฐ

### 5. ะะตะทัะปััะฐัั ััะฐััะธั (Participants)
- โ ะะพะฑะฐะฒะปะตะฝะธะต ัะตะทัะปััะฐัะฐ ััะฐััะฝะธะบะฐ (ะผะตััะพ, ะฒัะตะผั)
- โ ะัะพัะผะพัั ะฒัะตั ัะตะทัะปััะฐัะพะฒ

## ๐ก API ะะพะบัะผะตะฝัะฐัะธั

### ะะฐะทะพะฒัะต URL
- Production: `http://localhost/api/v1`
- Development: `http://localhost:8000/api/v1`

### Races Endpoints

#### ะะพะปััะธัั ะฒัะต ัะพัััะทะฐะฝะธั
```bash
GET /races/
```

**ะัะฒะตั:**
```json
[
  {
    "id": 1,
    "race_date": "2026-02-15",
    "race_time": "14:00:00",
    "hippodrome": "Hippodromo Central",
    "name": "Grand Prix 2026"
  }
]
```

#### ะกะพะทะดะฐัั ะฝะพะฒะพะต ัะพัััะทะฐะฝะธะต
```bash
POST /races/
Content-Type: application/json

{
  "date": "2026-02-15",
  "time": "14:00:00",
  "hippodrome": "Hippodromo Central",
  "name": "Grand Prix 2026"
}
```

#### ะะพะปััะธัั ัะพัััะทะฐะฝะธะต ั ััะฐััะฝะธะบะฐะผะธ
```bash
GET /races/{id}
```

### Jockeys Endpoints

#### ะะพะปััะธัั ะฒัะตั ะถะพะบะตะตะฒ
```bash
GET /jockeys/
```

#### ะกะพะทะดะฐัั ะถะพะบะตั
```bash
POST /jockeys/
Content-Type: application/json

{
  "name": "Alex Rider",
  "address": "St. Petersburg",
  "age": 25,
  "rating": 85
}
```

#### ะะพะปััะธัั ัะพัััะทะฐะฝะธั ะถะพะบะตั
```bash
GET /jockeys/{id}/races
```

### Horses Endpoints

#### ะะพะปััะธัั ะฒัะตั ะปะพัะฐะดะตะน
```bash
GET /horses/
```

#### ะกะพะทะดะฐัั ะปะพัะฐะดั
```bash
POST /horses/
Content-Type: application/json

{
  "nickname": "Black Beauty",
  "gender": "ะบะพะฑัะปะฐ",
  "age": 5,
  "owner_id": 1
}
```

**ะะพะฟัััะธะผัะต ะทะฝะฐัะตะฝะธั gender:** `ะถะตัะตะฑะตั`, `ะบะพะฑัะปะฐ`, `ะผะตัะธะฝ`

#### ะะพะปััะธัั ัะพัััะทะฐะฝะธั ะปะพัะฐะดะธ
```bash
GET /horses/{id}/races
```

### Owners Endpoints

#### ะะพะปััะธัั ะฒัะตั ะฒะปะฐะดะตะปััะตะฒ
```bash
GET /owners/
```

#### ะกะพะทะดะฐัั ะฒะปะฐะดะตะปััะฐ
```bash
POST /owners/
Content-Type: application/json

{
  "name": "Ivan Petrov",
  "address": "Moscow",
  "phone": "+7-999-123-4567"
}
```

### Participants Endpoints

#### ะะพะฑะฐะฒะธัั ััะฐััะฝะธะบะฐ
```bash
POST /participants/
Content-Type: application/json

{
  "race_id": 1,
  "jockey_id": 1,
  "horse_id": 1,
  "place": 1,
  "time_result": "12:45:30"
}
```

## ๐ป ะะฐะทัะฐะฑะพัะบะฐ

### ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ ั hot-reload

```bash
# Backend hot-reload ัะถะต ะฒะบะปััะตะฝ ะฒ docker-compose.yml
docker logs -f racetracker-backend

# Frontend - ััะตะฑัะตั ะฟะตัะตะทะฐะณััะทะบะธ ะบะพะฝัะตะนะฝะตัะฐ
docker restart racetracker-frontend
```

### ะัะฟะพะปะฝะตะฝะธะต ัะตััะพะฒ

```bash
# Backend ัะตััั
docker exec racetracker-backend pytest tests/

# ะก ะฟะพะบัััะธะตะผ
docker exec racetracker-backend pytest tests/ --cov=src
```

### ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะัะต ะปะพะณะธ
docker-compose logs -f

# ะขะพะปัะบะพ backend
docker logs -f racetracker-backend

# ะขะพะปัะบะพ frontend
docker logs -f racetracker-frontend

# ะะพัะปะตะดะฝะธะต 50 ัััะพะบ
docker logs --tail 50 racetracker-backend
```

### ะััะฐะฝะพะฒะบะฐ ะธ ะพัะธััะบะฐ

```bash
# ะััะฐะฝะพะฒะธัั ะบะพะฝัะตะนะฝะตัั
docker-compose down

# ะััะฐะฝะพะฒะธัั ะธ ัะดะฐะปะธัั volumes
docker-compose down -v

# ะะตัะตัััะพะธัั ะบะพะฝัะตะนะฝะตัั
docker-compose build --no-cache
```

## ๐ Troubleshooting

### ะัะพะฑะปะตะผะฐ: ะะพัั ัะถะต ะทะฐะฝัั

```bash
# ะะฐะนัะธ ะฟัะพัะตัั ะฝะฐ ะฟะพััั 80
sudo lsof -i :80

# ะะฐะนัะธ ะฟัะพัะตัั ะฝะฐ ะฟะพััั 8000
sudo lsof -i :8000

# ะััะฐะฝะพะฒะธัั ะบะพะฝัะตะนะฝะตัั
docker-compose down
```

### ะัะพะฑะปะตะผะฐ: Frontend ะฝะต ะทะฐะณััะถะฐะตััั

```bash
# ะัะพะฒะตัะธัั ะปะพะณะธ Nginx
docker logs racetracker-frontend

# ะัะพะฒะตัะธัั ะดะพัััะฟะฝะพััั
curl http://localhost/

# ะัะพะฒะตัะธัั ััะธะปะธ
curl http://localhost/src/app/styles/index.css
```

### ะัะพะฑะปะตะผะฐ: API ะฝะต ะพัะฒะตัะฐะตั

```bash
# ะัะพะฒะตัะธัั health
curl http://localhost:8000/health

# ะัะพะฒะตัะธัั ะปะพะณะธ backend
docker logs racetracker-backend

# ะัะพะฒะตัะธัั ะดะพัััะฟะฝะพััั API
curl http://localhost:8000/api/v1/races/
```

### ะัะพะฑะปะตะผะฐ: ะะฐะฝะฝัะต ัะตัััััั ะฟัะธ ะฟะตัะตะทะฐะณััะทะบะต

**ะขะตะบััะตะต ะฟะพะฒะตะดะตะฝะธะต:** SQLite ะฒ ะฟะฐะผััะธ (`:memory:`)

**ะะปั ัะพััะฐะฝะตะฝะธั ะดะฐะฝะฝัั:**
1. ะะทะผะตะฝะธัั `DATABASE_URL` ะฒ docker-compose.yml ะฝะฐ ัะฐะนะป-based SQLite
2. ะะพะฑะฐะฒะธัั volume ะดะปั ะฟะฐะฟะบะธ ะดะฐะฝะฝัั
3. ะะปะธ ะธัะฟะพะปัะทะพะฒะฐัั PostgreSQL ะบะพะฝัะตะนะฝะตั

### ะัะพะฑะปะตะผะฐ: CORS ะพัะธะฑะบะธ

ะัะปะธ ะฟะพะปััะฐะตัะต CORS ะพัะธะฑะบะธ ะฒ ะบะพะฝัะพะปะธ ะฑัะฐัะทะตัะฐ:
- Backend CORS ัะถะต ะฝะฐัััะพะตะฝ ะดะปั `localhost`
- Nginx ะฟัะพะบัะธััะตั `/api/*` ะฝะฐ backend
- ะฃะฑะตะดะธัะตัั ััะพ ะธัะฟะพะปัะทัะตัะต ะพัะฝะพัะธัะตะปัะฝัะต ะฟััะธ `/api/v1`

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

- [FastAPI ะะพะบัะผะตะฝัะฐัะธั](https://fastapi.tiangolo.com/)
- [SQLAlchemy ะะพะบัะผะตะฝัะฐัะธั](https://docs.sqlalchemy.org/)
- [Feature-Sliced Design](https://feature-sliced.design/)
- [Docker Compose Reference](https://docs.docker.com/compose/compose-file/)

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตััััั

- [Docker Setup ะดะพะบัะผะตะฝัะฐัะธั](./DOCKER_SETUP.md)
- [IMPLEMENTATION_SUMMARY](./IMPLEMENTATION_SUMMARY.md)
- [FastAPI Swagger UI](http://localhost:8000/docs)

---

**ะกัะฐััั**: โ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั  
**ะะตััะธั**: 1.0.0  
**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต**: 2026-02-09
