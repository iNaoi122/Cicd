<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RaceTracker - –û—Ç–ª–∞–¥–∫–∞</title>
    <link rel="stylesheet" href="src/app/styles/index.css">
    <style>
        .debug-panel {
            background: #f5f5f5;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px;
            font-family: monospace;
            font-size: 14px;
        }
        .debug-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #007bff;
        }
        .debug-item {
            margin: 8px 0;
            padding: 8px;
            background: white;
            border-left: 3px solid #28a745;
        }
        .debug-error {
            border-left: 3px solid #dc3545;
            color: #dc3545;
        }
        .debug-status {
            font-weight: bold;
            margin: 15px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
        }
        .status-ok {
            background: #d4edda;
            color: #155724;
        }
        .status-error {
            background: #f8d7da;
            color: #721c24;
        }
        h1 {
            color: #333;
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üîç RaceTracker - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h1>

    <div class="debug-panel">
        <div class="debug-title">‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ</div>
        <div class="debug-item">–í–µ—Ä—Å–∏—è –±—Ä–∞—É–∑–µ—Ä–∞: <span id="browser"></span></div>
        <div class="debug-item">User Agent: <span id="ua"></span></div>
        <div class="debug-item">–¢–µ–∫—É—â–∏–π URL: <span id="url"></span></div>
        <div class="debug-item">–û–∫–Ω–∞ –≤ –ø–∞–º—è—Ç–∏: <span id="memory"></span></div>
    </div>

    <div class="debug-panel">
        <div class="debug-title">üì¶ –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤</div>
        <div class="debug-item">CSS –∑–∞–≥—Ä—É–∂–µ–Ω: <span id="css-status">–ø—Ä–æ–≤–µ—Ä–∫–∞...</span></div>
        <div class="debug-item">DOM –≥–æ—Ç–æ–≤: <span id="dom-status">–æ–∂–∏–¥–∞–Ω–∏–µ...</span></div>
        <div class="debug-item">–ú–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã: <span id="modules-status">–æ–∂–∏–¥–∞–Ω–∏–µ...</span></div>
    </div>

    <div class="debug-panel">
        <div class="debug-title">üéØ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
        <div class="debug-item" id="app-status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</div>
        <div class="debug-item" id="app-result">–†–µ–∑—É–ª—å—Ç–∞—Ç: –æ–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <div class="debug-panel">
        <div class="debug-title">üìù –õ–æ–≥–∏ –∫–æ–Ω—Å–æ–ª–∏</div>
        <div id="console-logs"></div>
    </div>

    <script>
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –∫–æ–Ω—Å–æ–ª—å
        const consoleLogs = [];
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        console.log = function(...args) {
            consoleLogs.push({ type: 'log', message: args.join(' ') });
            originalLog.apply(console, args);
            updateLogs();
        };

        console.error = function(...args) {
            consoleLogs.push({ type: 'error', message: args.join(' ') });
            originalError.apply(console, args);
            updateLogs();
        };

        console.warn = function(...args) {
            consoleLogs.push({ type: 'warn', message: args.join(' ') });
            originalWarn.apply(console, args);
            updateLogs();
        };

        function updateLogs() {
            const logsDiv = document.getElementById('console-logs');
            logsDiv.innerHTML = consoleLogs.map(log => {
                const className = log.type === 'error' ? 'debug-error' : 'debug-item';
                return `<div class="${className}">[${log.type.toUpperCase()}] ${log.message}</div>`;
            }).join('');
        }

        // –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
        document.getElementById('browser').textContent = navigator.userAgent.substring(0, 50) + '...';
        document.getElementById('ua').textContent = navigator.userAgent;
        document.getElementById('url').textContent = window.location.href;

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º CSS
        console.log('üöÄ RaceTracker Debug –∑–∞–ø—É—â–µ–Ω');

        window.addEventListener('load', function() {
            console.log('‚úÖ –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
            document.getElementById('css-status').textContent = '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω';
            document.getElementById('css-status').style.color = 'green';
        });

        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ DOM –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω');
            document.getElementById('dom-status').textContent = '‚úÖ –ì–æ—Ç–æ–≤';
            document.getElementById('dom-status').style.color = 'green';

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞–º—è—Ç—å
            if (performance.memory) {
                document.getElementById('memory').textContent =
                    Math.round(performance.memory.usedJSHeapSize / 1048576) + ' MB';
            } else {
                document.getElementById('memory').textContent = 'N/A';
            }
        });

        // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        console.log('üì¶ –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ...');

        (async function() {
            try {
                console.log('üì• –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª–∏...');
                const { initApp } = await import('./src/app/app.js');
                console.log('‚úÖ –ú–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                document.getElementById('modules-status').textContent = '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã';
                document.getElementById('modules-status').style.color = 'green';

                document.getElementById('app-status').textContent = '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...';
                initApp();
                console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
                document.getElementById('app-result').textContent = '‚úÖ –£—Å–ø–µ—à–Ω–æ';
                document.getElementById('app-result').style.color = 'green';
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:', error);
                document.getElementById('app-result').textContent = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
                document.getElementById('app-result').style.color = 'red';
            }
        })();
    </script>
</body>
</html>
